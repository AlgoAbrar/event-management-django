{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="max-w-3xl mx-auto p-6">
  <h1 class="text-3xl font-bold text-rose-600 mb-4">{{ event.name }}</h1>

  <div class="bg-white rounded-lg shadow p-6 space-y-4">
    <p><strong>Date:</strong> {{ event.date }}</p>
    <p><strong>Location:</strong> {{ event.location }}</p>
    <p><strong>Description:</strong> {{ event.description }}</p>
    <p><strong>Category:</strong> {{ event.category.name }}</p>

    {% if event.image %}
      <img src="{{ event.image.url }}" alt="{{ event.name }}" class="mt-4 rounded-md shadow-md max-h-64">
    {% endif %}

    <!-- RSVP -->
    {% if user.is_authenticated and user_role == "Participant" %}
      {% if rsvp_status %}
        <p class="text-green-600 mt-4 font-medium">You have already RSVP’d to this event.</p>
      {% else %}
        <form action="{% url 'rsvp-event' event.id %}" method="post">
          {% csrf_token %}
          <button type="submit" class="bg-rose-600 text-white px-4 py-2 rounded hover:bg-rose-700 mt-2">
            RSVP to this event
          </button>
        </form>
      {% endif %}
    {% endif %}

    <!-- Edit/Delete -->
    {% if user_role == "Admin" or user_role == "Organizer" %}
      <div class="flex space-x-4 mt-6">
        <a href="{% url 'event-update' event.id %}" class="bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600">Edit</a>
        <a href="{% url 'event-delete' event.id %}"
           onclick="return confirm('Are you sure you want to delete this event?');"
           class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">Delete</a>
      </div>
    {% endif %}
  </div>

  <a href="{% url 'event-list' %}" class="mt-6 inline-block text-rose-500 hover:underline">← Back to all events</a>
</div>
{% endblock %}
